<md-card class="card">
  <md-card-header>
    <md-card-title>
      <h1>Convert influence</h1>
    </md-card-title>
  </md-card-header>
  <md-card-content>
    <h2>Influence to convert</h2>
    <div *ngIf="influences?.length == 0">
      You have no influence to convert
    </div>

    <div *ngIf="influences?.length > 0">
      <form class="form" [formGroup]="influenceGeneralizationForm">
        <table class="table">
          <tr>
            <td>
              <md-select class="input" placeholder="Department || Division" [(ngModel)]="influence" name="influence" formControlName="divisionCtrl"
                (change)="updateInfluenceAmount()">
                <md-option *ngFor="let influence of influences" [value]="influence">
                  {{influence?.department}} || {{influence?.division}}
                </md-option>
              </md-select>
            </td>
          </tr>
          <tr>
            <td>
              <md-input-container class="input">
                <input mdInput placeholder="Amount" [(ngModel)]="amount" formControlName="amountCtrl" />
                <md-hint align="end">{{ influence?.amount }} influence available</md-hint>
                <md-error *ngIf="amountCtrl.hasError('min')">
                  Amount must be positive
                </md-error>
                <md-error *ngIf="amountCtrl.hasError('max')">
                  You don't have enough influence
                </md-error>
                <md-error *ngIf="amountCtrl.hasError('pattern')">
                  Please enter a numerical value
                </md-error>
                <md-error *ngIf="amountCtrl.hasError('required')">
                  Amount is <strong>required</strong>
                </md-error>
              </md-input-container>
            </td>
          </tr>
          <tr>
            <td>
              <button md-button class="button" (click)="convertInfluence()" [disabled]="influenceGeneralizationForm.invalid">CONVERT</button>
            </td>
          </tr>
        </table>
      </form>
    </div>
  </md-card-content>
</md-card>